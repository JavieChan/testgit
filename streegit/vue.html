<html>
<head>
<title>vue test</title>
<script src="vue.js"></script>
</head>
<body>
	<div id="app">
		<p>{{ message }}</p>
		<button v-on:click="reverseMessage()">Reverse Message</button>
	</div>
	
<script>
var app = new Vue({
  el: '#app',
  data: {
    message: 'Hello JavieChan!'
  },
  methods: {
    reverseMessage: function () {
      this.message = this.message.split('').reverse().join('');
    }
  }
});

app.reverseMessage();  // 直接调用
</script>	
	
	<div id="app-7" v-bind:class="classObject">
	  <ol>
		<todo-item v-for="item in groceryList" v-bind:todo="item"></todo-item>
	  </ol>
	</div>
	
<script>
Vue.component('todo-item', {
  props: ['todo'],
  template: '<li>{{ todo.text }}</li>'
});
var app7 = new Vue({
  el: '#app-7',
  data: {
    groceryList: [
      { text: 'Vegetables' },
      { text: 'Cheese' },
      { text: 'Whatever else humans are supposed to eat' }
    ],
	classObject: {
		active: true,
		'text-danger': false
	}
  }
});
</script>

	<div id="app-8">
		<template v-if="loginType === 'username'">
		  <label>Username</label>
		  <input placeholder="Enter your username" key="username-input" v-model.lazy.trim="user">
		</template>
		<template v-else>
		  <label>Email</label>
		  <input placeholder="Enter your email address" key="email-input" v-model.trim="email">
		</template>
		<button type="button" v-on:click="ChangeLoginType">Toggle login type</button>
		<p>{{ user }}{{ email }}</p>
	</div>
	
<script>
var app8 = new Vue({
	el: '#app-8',
	data: {
		loginType: 'username',
		user: '',
		email: ''
	},
	methods: {
		ChangeLoginType: function(){
			if(this.loginType === 'username'){
				this.loginType = 'email';
				this.user = '';
			}else{
				this.loginType = 'username';
				this.email = '';
			}
		}
	}
});
</script>	

	<div id="app-9">
		<input v-model="newTodoText" v-on:keyup.enter="addNewTodo" type="text" placeholder="add a todo" />
		<ul>
			<li is="todo-item" v-for="(todo, index) in todos" v-bind:title="todo" v-on:remove='todos.splice(index, 1)'></li>
		</ul>
	</div>
	
<script>
	Vue.component('todo-item', {
		template: '<li>\
			{{ title }}\
			<button type="button" v-on:click="$emit(\'remove\')">X</button>\
			</li>',
		props: ['title']
	});

	var app9 = new Vue({
		el: '#app-9',
		data: {
			newTodoText: '',
			todos: [
				'wake up',
				'go to school',
				'have breakfast'
			]
		},
		methods: {
			addNewTodo: function(){
				this.todos.push(this.newTodoText);
				this.newTodoText = '';
			}
		}
	});
</script>

	<div id="app-10">
		<p>{{ total }}</p>
		<button-count v-on:increment="incrementTotal"></button-count>
		<button-count v-on:increment="incrementTotal"></button-count>
	</div>
	
<script>
	Vue.component('button-count', {
		template: '<button type="button" v-on:click="incrementChild">{{ count }}</button>',
		data: function(){
			return {
				count: 0
			}
		},
		methods: {
			incrementChild: function(){
				this.count += 1;
				this.$emit('increment');
			}
		}
	})

	var app10 = new Vue({
		el: '#app-10',
		data: {
			total: 0
		},
		methods: {
			incrementTotal: function(){
				return this.total += 1;
			}
		}
	});
</script>	

	<div id="app-11">
		<currency-input label="Price" v-model="price"></currency-input>
		<currency-input label="Shipping" v-model="shipping"></currency-input>
		<currency-input label="Handling" v-model="handling"></currency-input>
		<currency-input label="Discount" v-model="discount"></currency-input> 
		<p>Total: ${{ total }}</p>
	</div>
	
<script src="https://cdn.rawgit.com/chrisvfritz/5f0a639590d6e648933416f90ba7ae4e/raw/98739fb8ac6779cb2da11aaa9ab6032e52f3be00/currency-validator.js"></script>	
<script>
	Vue.component('currency-input', {
	  template: '\
		<div>\
		  <label v-if="label">{{ label }}</label>\
		  $\
		  <input\
			ref="input"\
			v-bind:value="value"\
			v-on:input="updateValue($event.target.value)"\
			v-on:focus="selectAll"\
			v-on:blur="formatValue"\
		  >\
		</div>\
	  ',
	  props: {
		value: {
		  type: Number,
		  default: 0
		},
		label: {
		  type: String,
		  default: ''
		}
	  },
	  mounted: function () {
		this.formatValue()
	  },
	  methods: {
		updateValue: function (value) {
		  var result = currencyValidator.parse(value, this.value)
		  if (result.warning) {
			this.$refs.input.value = result.value
		  }
		  this.$emit('input', result.value)
		},
		formatValue: function () {
		  this.$refs.input.value = currencyValidator.format(this.value)
		},
		selectAll: function (event) {
		  // Workaround for Safari bug
		  // http://stackoverflow.com/questions/1269722/selecting-text-on-focus-using-jquery-not-working-in-safari-and-chrome
		  setTimeout(function () {
			event.target.select()
		  }, 0)
		}
	  }
	})

	var app11 = new Vue({
	  el: '#app-11',
	  data: {
		price: 0,
		shipping: 0,
		handling: 0,
		discount: 0
	  },
	  computed: {
		total: function () {
		  return ((
			this.price * 100 + 
			this.shipping * 100 + 
			this.handling * 100 - 
			this.discount * 100
		  ) / 100).toFixed(2)
		}
	  }
	})
</script>	

	<div id='app-12'>
		<app-layout>
		  <h1 slot="header">这里可能是一个页面标题</h1>
		  <p>主要内容的一个段落。</p>
		  <p>另一个主要段落。</p>
		  <p slot="footer">这里有一些联系信息</p>
		</app-layout>
	</div>
	
<script>
	Vue.component('app-layout', {
		template: '<div class="container">\
		  <header>\
			<slot name="header"></slot>\
		  </header>\
		  <main>\
			<slot></slot>\
		  </main>\
		  <footer>\
			<slot name="footer"></slot>\
		  </footer>\
		</div>'
	});
	
	var app12 = new Vue({
		el: '#app-12'
	})
</script>	
</body>
</html>
